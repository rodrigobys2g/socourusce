<?php
/**
 * Smart Commerce do Brasil
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@e-smart.com.br so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.e-smart.com.br for more information.
 *
 * @category    Esmart
 * @package     Esmart_SmartCheckout
 * @copyright   Copyright (c) 2012 Smart Commerce do Brasil. (http://www.e-smart.com.br)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
 
 /**
 * 
 *
 * @category    Esmart
 * @package     Esmart_SmartCheckout
 * @author      Tiago Sampaio <tiago.sampaio@e-smart.com.br>
 */
?>
<div id="smartcheckout-login-popup" style="display: none;">
    <div class="smartcheckout-popup-wrapper">
        <div class="smartcheckout-popup-contents">
            <div id="smartcheckout-login-popup-contents-forgot" style="display: none;">
                <h1><?php echo $this->__('Forgotten your password?'); ?></h1>
                <p><?php echo $this->__('Enter your email below and we\'ll send you a new password by email.'); ?></p>

                <form id="smartcheckout-forgot-form">

                    <div id="smartcheckout-forgot-loading" style="display: none;" class="loading-ajax-login">&nbsp;</div>
                    <div id="smartcheckout-forgot-error" class="smartcheckout-error" style="display: none;">&nbsp;</div>
                    <div id="smartcheckout-forgot-success" style="display: none;">
                        <?php echo $this->__('We have now sent you a new password to your email address. Click the link below to return to login.'); ?>
                    </div>

                    <table id="smartcheckout-forgot-table">
                        <tr>
                            <td style="width: 25%;">
                                <label for="id_smartcheckout_email"><?php echo $this->__('Email address'); ?></label>
                            </td>
                            <td style="width: 40%;">
                                <input type="text" class="input-text" name="smartcheckout_email" id="id_smartcheckout_email" />
                            </td>
                            <td style="width: 45%; text-align: center;">
                                <button id="smartcheckout-forgot-button" type="button"><?php echo $this->__('Send password'); ?></button>
                            </td>
                        </tr>
                    </table>
                </form>
                <p style="margin-top: 10px;"><a href="javascript:void(0);" id="smartcheckout-return-login-link"><?php echo $this->__('Return to login'); ?></a></p>
            </div>

            <div id="smartcheckout-login-popup-contents-login">

                <h1><?php echo $this->__('Login'); ?></h1>

                <p><?php echo $this->__('Please login with your email address and password.'); ?></p>
                <form id="smartcheckout-login-form">

                <div id="smartcheckout-login-loading" style="display: none;" class="loading-ajax-login">&nbsp;</div>
                <div id="smartcheckout-login-error" class="smartcheckout-error" style="display: none;">&nbsp;</div>

                <table id="smartcheckout-login-table">
                    <tr>
                        <td style="width: 30%;"><label for="id_smartcheckout_username"><?php echo $this->__('Email address'); ?></label></td>
                        <td style="width: 51%;"><input tabindex="100" type="text" class="input-text" name="smartcheckout_username" id="id_smartcheckout_username" /></td>
                        <td rowspan="2"  style="width: 19%; vertical-align: middle;"><button tabindex="102" id="smartcheckout-login-button" type="button"><?php echo $this->__('Login'); ?></button></td>
                    </tr>
                    <tr>
                        <td><label for="id_smartcheckout_password"><?php echo $this->__('Password'); ?></label></td>
                        <td><input type="password" tabindex="101" name="smartcheckout_password" class="input-text" id="id_smartcheckout_password" /></td>
                    </tr>

                </table>
                </form>

                <p style="margin-top: 10px;"><a href="javascript:void(0);" id="smartcheckout-forgot-password-link"><?php echo $this->__('Forgotten your password?'); ?></a></p>

            </div>

            <p class="close"><a href="javascript:void(0);"><?php echo $this->__('Close'); ?></a></p>
        </div>
    </div>
    <div class="smartcheckout-popup-footer">&nbsp;</div>
</div>

<script>
var smartcheckout_login_popup;
var login_popup;
Event.observe(window, 'load', function() {
    var options = {
        forgot_password_url: '<?php echo $this->getUrl('smartcheckout/ajax/forgotPassword', array('_secure'=>true)); ?>',
        login_url: '<?php echo $this->getUrl('smartcheckout/ajax/login', array('_secure'=>true)); ?>',
        translations: {
            invalid_email: '<?php echo $this->__('Please enter a valid email address'); ?>',
            email_not_found: '<?php echo $this->__('Please enter a registered email address.'); ?>'
        }
    };
    smartcheckout_login_popup = new SmartCheckoutLoginPopup(options);
    login_popup = smartcheckout_login_popup;
});
</script>
